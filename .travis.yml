language: ruby
dist: trusty
sudo: required
rvm:
  - 2.6.2
apt:
  sources:
    - ubuntu-sdk-team
  packages:
    - qt5-default
    - libqt5webkit5-dev
    - gstreamer1.0-plugins-base
    - gstreamer1.0-tools
    - gstreamer1.0-x

install: bundle install --jobs=3 --retry=3 --with webkit

env:
  global:
    - ARTIFACTS_DEBUG=0
    - ARTIFACTS_REGION="eu-west-1"
    - CI_ARTIFACTS_PATH="https://s3-eu-west-1.amazonaws.com/howitzer-example-travis/$TRAVIS_REPO_SLUG/$TRAVIS_BUILD_NUMBER/$TRAVIS_JOB_NUMBER/"

  matrix:
    - secure: "k/2zzUeePe753UyPxCqCiiIwafhO19V0U4NOo1IToZUYwsGQ8L3uzzpNU8PfJDYkPYWTZBnvQNhm3gJVgvGvsVpzawmWVUHtkX+1bL8+dpVnqBjrlnR3+Du6OsLT7PtGGWOFuZDG3XDpQumI2vLq1osDZsnYB9Y+5cDY1Siu4GMY2G/jEOW5I8khufo4ubDhsY5vEmz1T+7N7G4lmyQy3Io3Jh3Ciws1Cku97ZbBT3RB+sPMlbAy40b0zZEZr0BuSogEUzfJdEt8nPQhd2nregwSkaeN9NgFVWl7nFdmBFTxr5wf86sUHH7vEd40k4uKx8BOYdtVcFAMWK/QmSXIQwO1WCHt1Fi2MloIIzGb7FkDuIS6cVbUm1GCtEArYHhX+Eti5Me/3j1hCGVtUwzNUv4PjocJ7pwy+H0DqRRwvTf77dUVVzBKMHcXmm8MMMu/AT0iTQTfl3R4JX3WgtSnxzLUAoa48K2gXWFqi81lwSG7C0lTvPG6RPF5guY+MgC1lNXVRRV5+OfnPgStwCi9/N7JLddLvmo8S8luAK8bAPcAxxQ7mX38/pQvC1BXWq7EMSJhIP6vTLz2T5foDv8vCVAg6x7H4hnbNzCu2qBIl9o55wcbIQTC0ACaEeDOdI7hHRVTluKIfMqnWr0si9k4CK45tiktZF9/bGjKQGQxH5A=" #driver=poltergeist
    - secure: "IlEQm8aQCidKr752f1yGgXfv012A+M6Z8ZdeJaZ06jEvogh9j3Z9S+VIxuJbHHkdGaOiZC5MzGx9PA2xPmLtsTkqKdj11DHWXyXJ4gOyxyS7NeP1mn2o2VQ/RD+5vCx+olVFWY6ulg+AU4TnJpDjXteEDJj+rVMeHR/qeMGndWk6lCw9kBrylnZN9SW6cXpm6DaFC3hOdhk6tIXA/Y544LMf0+JbYvkFUiTmzgdmI10wzWy2VOls0hPhs5xL0VNE+F7pcXWT37zsW9wAgTjufm/eRu5JCoMrHJIg1bLUAjx4UO8z+1ysSzKqtu7HaV+IK1NGu/0WCxUwb7YGcPJm06ucnHyss6XYpgqOyLxAXX4RsiNOpavs2kuEEnodOfc38PKQ7Tq6xeHQv51dk5tiA5oK0+UGmmwaupSmxsP6A4cGf5ga2XFuZ3aPNv1r2+4DWNfzMBaxxyOEYVYGasdegQOUq33i8GBvvEFTys53ixrXBqrAAWf87n42ayQ/t7X1qUHGgZJUrJtUtIDN4sYO9KUHCFa8a9sJpye+AuCgsrIMlppBXG9JPASvB3okh5BSbW51gOyw0CnC23VTRAnrZTSlWdtWuXWceCFsYr9dCJx4JOh9BkNuRY538/dC/7YnATecRbaFkgM1LHNSyse+Iy4AieWdz10V6nh5L7FHj2Y=" #driver=headless_chrome
    - secure: "BIZwJ9lJD26Ag0lwn62y249XsGxI2O4d8g4HLZqI7Grg362+eB/jhpbl3KemoBGRW9/OAIbq4afoTKzhnifrHp5Z7z/jyAehRiYJgSGBEiU4Wfxjt8WkEupyIK/HBMxlQg6WoTwmbET4VFkz/7cfdCLhnhnStmXZo6pn6vdotKZvAySYQKq+mFU4mR+lhgqU7b1R39EHJLXgLwgLcBxLQai+qSd4WkJ+t+mz/fZ6FRxI6BL0tj8a031xkEg4ZJx04t0LEfBlA9mEl1kY5Lj7hKkcV1/iE8ixnHeBrBvsm7XH+14wbMlzyPTOvnQWEFn5g8bYYX5vZ3t6dTUDcz3dIKGakas632tjSyZZ7iMzn5hPnLfusHvreng6Kl77PiufCl2hmKyEAoFsmmVHgCdBLYY9+wEjpUQsI8/9iRvTdrImSAEhlEJRL/4LnFxcKSsXo0zxzW4Ny/PQlbcXT3h0Ax+Q+NhZY6W22l9pzwdTsvaF6cGEXSU7Ir8qr0Cbqm2lODTDbGJ0iinb1Kfhi8MnmrYwPxwuluEv3e2o7PZGbxumfD5C0ouZvEn85HBC1dZPD/TeNql3Vwraoi5Poi+6ndN1QtawLDxxfCKF1mrLSNuIckvg/EYv4bzm89q1bHXjKxTLhUbOlsX9OhbYwcZlAqYi60mMYI3dHbfZJMEf3no=" #driver=webkit
    - secure: "uniqBeHmBYWzH0N1DxObK4ydrDp5qyf409oKVpDUfPQCwfllTgozNuoy5hmjGAyljcx2kQCG3f6QbHDCbIJ4d8ip0QJ8SWXAplFORIeaab61RrXnFpv3yVzQH6axnUF+RBZ11AaopMg3zSwahDf5fwVrtZBwV34qFsxPj448bT7m6RiCvy9PyyD8pvETTVGI4fmoOOLYZthYG47QhQnrHD6ETDYACd6zmguQIQwB1exprORti/B8MYLQeaEdhG1Q84PyBJkMCdqg3Lxp+eeZtKcFL67JqAk2CNSQUUKngXlGnk9CeQ6et8gBfD3ZvysJhH2bqHyE+d42GZsVPZKkXXLxz/l0bU/4AmyKGUy5pbZVw+aEtdaLez2HCbNMSqCZyTMzHGTHjAXPIB5gIjOV+nM/CDyyaeyhEKSAViTVdg4+CLa3wAsLN1OlWcMa46dD7kPWgouRMmrGYNHooAcy3p8oLtwuNWoaw6Fhi9rv+FH8VKBu0Y78TMP8gS3axCTsgn2WEYmMyHg8/E10wRs8G0ZGwFcskFQ8qB2GIpO7O8QA3NCZ0A59/5z/DI70XUdG9wkMk1a4AigJnBHSnUyODLQybhf81pafarj5uOHaErLXBtv1xOQNo1gQQcEYqt6HVWCNwYBJxgdMhziCusRi/Ru1P0WfYLnINtZMLMBWW0E=" #driver=sauce
    - secure: "f24fzdhSzxlNIYtCmYNWfcM4zFZlzNEkOWGfRqJh3Jurz9SpwSXIWwTlXa6J+1FAe+AS7yHdp5TqXmzYm9LIHOXWxsAhOYSC0ueADrTZqslWN6RQ4Skr0tHZm/4MAJfSIWYUVsllo78u1KiTEaOVsnu6yJWdcwr6sA1HSvid2myn4SUqSsm2GNry0Yqb2qBUj6y7YBWUSZdusl2jERVUhMPpvr5gSquZC8H0OYDF/5OCuk8XgLwBPPFEHT3dezx0fusQaDajYag05LI5NO6F8W+IOk36speRHkdfjPyGgS4PTp0pMhRy5WCpXXQ/80JiCSXp+4U2a3IunaisckDkJrSuI3zk9Xc8KLITYX2kH58K9VMMkw9CGpXOWExqIAXaQBFSMnVaIEHiTzWs3IumxWEzfCswuXoc44wSRMzqwZnwA10QaWdGHrOpGmaaKdmST15NbgqLI313vd37k4Hp08FVD4m2CzgoMlqC53DJV8c6k3IfOc875fwEQWGgLtZ2FrLC0UW/MJoWq238ss4T12pAZF4NkIRxMpUV0HfRW1hpMio02qk7qfUpWVVclg/zGqxGTG9ctbU31sVvolMmtwd9AR2tMmSmyTAonlgA8vxGathYSXdgLLpbXbWRFWOFHOZGJpdGCaDc42NhPkaobpguntKj8DzNmaKf3l16OtA=" #driver=testingbot
    - secure: "dhaXaeTTLVOxkBfCvt/+yPlP+hOKvdWHCXE7sbDDsCIj/v5WEK724LUalMbDfJHolndnKqSN4fccjmCMIPeuioOIGt54kHmz3atq9PZuegYu6qVSuLr1ugANw3V99a6YDxZLdruL0JHHCwuTxLYLoWT//u8y4tMsbUZQokNel3mqQx3o/x7OrPKVUg0V5i8Myb8yBtV+9SKw1wQaK3U5jR4e9ze7bhINlJSUaBEe1t55KSptsEfnhwL+LY76i+tMYDrl5EcrjK/8Y6gsHZAocXJYuu5MNeHdg4ufwSafO9vm9fssWhQvs+TkHrtxDwc8qgXQT4X1UMZyeRuZFYKd8LfuaCikL3+FAx/9MmbLXv5RaLZBxlDtw5MglmDaSRGzLEfuhADi0fWfmaxHGQjEU3BTWKiFtesHO1i7eA2xwhMoj0Vakpl2rBCVp0ckZ9vxhEO8gEZulYBU6xb968DNO4d5Qvh5WOBu9F3ftu+7p5x5lbPtsa3HYtslPaCpvov6qLOroeOJBcDJ3yNmq1d4gkOgH7QlYAWVTuBSz7UY25nNL6LM+fbc2jOev1/JrQ4li3cSNx38x5jF3FNQKEJBkFibyiwGAe24zypaMafswTpMGLbOeBGx60U+nRkXPw1FfT8zwiqNI5Phttd1zHdS7J6MEMEB2tCwXlegQffVgjo=" #driver=browserstack
    - secure: "XRQ04Igl9AWAYrMxHJB93BPPAT0ZHMdFeSwMjb4LlSRujU3/Rmp3f/ZgGYonChMs137MqGcraG722DSdbQs5NFthaL3iIl997Hdke6f/41XYYnn8UiI3QU4f1h4f7umr0cDOn+ewdh/TGuKaRWCEYkmT2VAqszepcGa8wnhcoy21YxlKC/AsQOfOeCHYa/Y/yhHVSVW3lxwg8g7wZswfabhR7ITKGXJnvvrFv2+chh+pW+BDo3cs+zQod0/ETYDQvA8ZO5imgx7CsQiahK6fsOK9rWlfCcYPC6Hn4SMm4VJ3Ezlm9MUfd7vyziHei9uZHgs7hPBURwsvEHJ8Rt0rxCzmeDz9ihFDbs9d1RDfEKFtpAuZ5MGrqQPm6555VLn0RmIb5NxBf8/J+Cq/0iKAeJLKStjTGjwS9jpWE1bAhTKJCUwM7ATN9qhmKosu2uYL33ZsA4+54D8YsHZ8ucA/p/NZDXOPFh1tNzz4/9TlWL0Jl7dHoxdvaxuyoc6xHKzvLqcCvxLRLJFlePJaZzLxitSB7u4jtIlUeR4gRki54XL20lQb6mCi5JQN5lnaTX4g//KVl82N6QvmI54Zxd6jftJ+IiPDfkTId3gzFR53Sy9SUJoa3OgjPxOTJSDFp/I4lv1oIxxbBnZCBx6aN2rYlG3OoUSQtke3/6DKG+CFJm8=" #driver=crossbrowsertesting


addons:
  chrome: stable
  artifacts:
    key:
      secure: "gdQTTFauwapAwLlAm6TqkbRtKWi8HXH/h/oWoElbTnOMXGOv0+KWWRh3CA85p4Qbw/7UOl/1kHSWnlu5EHEUjsOgIoArffFHAqf6/PGgQHA800O3I83sTqWKOINs0i9v8XF0Rhj9HVmjIALVsMMGztQj+P+5Pbtzyzo1CJAYqyw4hNd8z+bU3qdLMXxY1UW/xu3lFjnT36zkaak9AhnK5d5AnQUiL5hONsyntIZ9AxohS1Q8ckHln/IWsbDHeUw9wsB0AOBYncO5u3ZNhvzHdjaHIG7XDKJ3fsz55xz2cwrTNfbWYU4/fcfpeYCVE6MC4+lfZ+DmrBYlieGsYPDD/ef9AY6jV+kJtwzZ+idD6ZAxMjtZFdjf2Ya0RTaE2nFANuIpOORquAJra8csAtzVlYhp0pOTwR0YIfIFye+KSqOCzSn4V1lG+Yc4NPUn3ToO426ey9f0hz8ApNRxmIUiVq9oN6qb5gHCpLi2GWCOrJl9G5bPRHxXpLffYDUX/i15My0s6GH0UVXLaAQmw94qSkfUyBJFsg4ug5p8IHB23E6YD2N675fgvfPidn0WFJlYo/hqjZTqoWq3FoBdRsUoQWCV9fnA2Kb6Ilnw+rDQ4CJ1CLq7KjiP93rnps8V+v/hGx4hvIUC+Z8Y/u9HvHlbxLs1CtlprVPnwF1eJZncZUI="
    secret:
      secure: "YRgTCXFnt0LvpzOKB5TnZMsWLrZiu0QbKuR1op9wVQuWzKXsZMuSS6hKFJkDPXMSoKvgKREEeVRSZSjte2jJ+dpyCYCns1aWcYRYuKNntfkyZFTUBYfbinHhbZKTkYNPPsWFEoER111Wpdgn//eT1YWn1VhmFdp1exUANwM8A5v1U6iBcnOzDhYC3Jsr+2/SfiPyM1lL36bllafph00sTrnos8TivT/3XLXcjMlzHjJSQnZG4xQY2UoA4EDNSG0otM3nmPRpYrJfCj4A+yGkfNe7Qq8K3hvAY9x6KHmSb/KqXvrNga1xcvk0aQ7fIkoZukVFKRygrCp9YICf2R2dg7vMoE/2Twsto+s9R456NLiC6ib9TiOr41gPj9TqPW04BW3iynGjcLXw6A1HXMdr4XbHkprRBWwdJp0oxzfotLYTyb5pb6mT/41GDMFgMWf/La7gHg24lT/TaI80nulllz9pIpDnBIObNw4Vrd24HPThLDgJQzuD63YVGQGPzGOe4d2hB1a8SKqZiHBgBHbNQijFCxm/yJrr9LlACBG3y41NLUN28gR3LJYhgJPu5DT7Sg4/gWmnWJIGE4m1wJ3SWngVAVlxUr6OGN26k9PnmlThccJLydl3R/kOUXDMm3nQKyjMCI68AF49BrbC6GqFB4EuEDLeWrMwbdvpdN0/B/Q="
    bucket: howitzer-example-travis
    paths:
      - $(find log -type f | tr "\n" ":")

script: "./scripts/run-tests.sh"
